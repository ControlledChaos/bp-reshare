/*! bp-reshare - v2.0.0 - 2017-07-24 4:43:29 PM UTC - https://imathi.eu/tag/reshare */
window.bpReshare=window.bpReshare||{},function(a,b){"undefined"!=typeof a.userNotifications&&(a.Notifications={start:function(){if(a.userNotifications.items&&0<a.userNotifications.items.length){if(this.dN=b.getElementById("wp-admin-bar-no-notifications"),this.bubble=b.getElementById("ab-pending-notifications"),this.items=a.userNotifications.items,this.amount=a.userNotifications.items.length,this.bubble.setAttribute("class","pending-count alert"),this.bubble.innerHTML=parseInt(this.bubble.innerHTML,10)+this.amount,this.dN)this.restoreDN=this.dN.cloneNode(!0);else{var c=b.querySelector("#wp-admin-bar-bp-notifications-default");for(var d in c.childNodes)"LI"!==c.childNodes[d].nodeName||this.dN||(this.dN=c.childNodes[d].cloneNode(!0));c.appendChild(this.dN)}if(this.dN.nodeName){this.dN.setAttribute("id","wp-admin-bar-notification-reshares");var e=this.dN.firstChild;if(e.setAttribute("href","#"),e.innerHTML=a.userNotifications.template.one,1<this.amount)e.innerHTML=a.userNotifications.template.more,e.setAttribute("href",a.userNotifications.link.more);else{var f=this.items;e.setAttribute("href",a.userNotifications.link.one.replace("%n",f.shift()))}var g=b.querySelector("#wp-admin-bar-my-account-activity-reshare").firstChild;g.innerHTML+="&nbsp",this.itemBubble=b.createElement("SPAN"),this.itemBubble.setAttribute("class","count"),this.itemBubble.innerHTML=this.amount,g.appendChild(this.itemBubble)}}var h=b.getElementsByTagName("body")[0].getAttribute("class").split(" ");-1!==h.indexOf("my-activity")&&-1!==h.indexOf("reshare")&&this.highLightReshares();var i=h.indexOf("activity-permalink");this.activityID=h[i+1]||0,null!==b.querySelector("#activity-"+this.activityID)&&this.updateBubbles(1)},highLightReshares:function(){this.amount&&this.items&&(this.items.forEach(function(a){var c=b.querySelector("#activity-"+a);c.setAttribute("style","border-left: 4px solid #21759b; padding-left: 1em"),window.setTimeout(function(){c.removeAttribute("style")},4e3)}),this.updateBubbles(this.amount))},updateBubbles:function(c){if(this.amount)if(this.bubble.innerHTML=parseInt(this.bubble.innerHTML,10)-c,0===parseInt(this.bubble.innerHTML,10)&&this.bubble.setAttribute("class","count no-alert"),this.amount===c)this.restoreDN&&b.querySelector("#wp-admin-bar-bp-notifications-default").appendChild(this.restoreDN),this.dN.remove(),this.itemBubble.remove();else if(this.itemBubble.innerHTML=parseInt(this.itemBubble.innerHTML,10)-c,1===this.amount-c&&this.activityID){var d=this.dN.firstChild,e=this,f=this.items.filter(function(a){if(parseInt(a,10)!==parseInt(e.activityID,10))return a});d.setAttribute("href",a.userNotifications.link.one.replace("%n",f.shift())),d.innerHTML=a.userNotifications.template.one}}},window.addEventListener("load",function(){var b=!1;b||(a.Notifications.start(),b=!0)}))}(window.bpReshare,window.document);